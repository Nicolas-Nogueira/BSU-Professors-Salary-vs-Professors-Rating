<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Professor Salary vs. Student Ratings Dashboard</title>

    <!-- Vega Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/vega@6.1.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@6.2.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@7.0.2"></script>

    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }

      .dashboard {
        display: grid;
        grid-template-columns: 2fr 1fr;
        grid-gap: 20px;
      }

      .full-width {
        grid-column: 1 / -1;
      }

      .chart {
        border: 1px solid #ccc;
        padding: 10px;
      }

      h1, h2 {
        margin-bottom: 10px;
      }

      .load-error {
        background: #fee;
        border: 1px solid #c00;
        padding: 12px;
        margin: 10px 0;
        border-radius: 4px;
      }
    </style>
  </head>

  <body>


    <!-- Dashboard Title -->
    <div class="full-width">
      <h1>Professor Salary vs. Student Ratings</h1>
      <p>
        This dashboard explores the relationship between professor salaries and
        student ratings across departments.
      </p>
    </div>

    <div class="dashboard">

        <!-- Scatter Plot -->
        <div class="chart full-width">
          <h2>Salary vs. Student Rating</h2>
          <div id="scatter-salary-rating"></div>
        </div>
  
        <!-- Salary by Department -->
        <div class="chart">
          <h2>Salary by Department</h2>
          <div id="salary-by-department"></div>
        </div>
  
        <!-- Average Rating by Department -->
        <div class="chart">
          <h2>Average Rating by Department</h2>
          <div id="avg-rating-by-department"></div>
        </div>
  
        <!-- Rating Distribution -->
        <div class="chart">
          <h2>Rating Distribution</h2>
          <div id="rating-distribution"></div>
        </div>
  
        <!-- Salary Distribution -->
        <div class="chart">
          <h2>Salary Distribution</h2>
          <div id="salary-distribution"></div>
        </div>
  
      </div>
  

      <!-- Insight Section -->
      <div class="full-width chart">
        <h2>Key Insights</h2>
        <p>The correlation was negligible (r = -0.074), not statistically significant (p = 0.328), and rating explained only 0.55% of salary variation. The large prediction error ($26,640) demonstrates that rating cannot meaningfully predict salary.

          These findings confirm that professor salaries are determined by institutional and professional factors—rank, years of experience, discipline, and administrative responsibilities—rather than student evaluations. This makes theoretical sense: university compensation structures are based on collective bargaining agreements, academic credentials, seniority systems, and market forces within disciplines, not on teaching popularity metrics.</p>
      </div>
  

    <!-- Embedded data (from BSU_prof_salary.csv) so the page works when opened directly without a server -->
    <script type="text/javascript">
      var embeddedCsv = "Base Pay,dept,rating\n109385.83,marketing ,2.6\n106233.94,math ,4.3\n120793.52,education,4.3\n109446.72,accounting ,3.4\n111842.88,management,3.6\n97279.12,anthropology ,2.8\n108833.04,social science ,2.9\n108555.61,business,4.4\n106674.74,physical education ,1.7\n102163.2,education,3.3\n100811.52,sociology,3.5\n109711.0,accounting ,3.9\n75750.58,math ,3.5\n106749.92,comp sci,2.8\n106355.54,accounting ,2.3\n98202.68,communication,3.0\n101110.78,geography,3.1\n99287.54,math ,3.3\n76710.6,criminal justice,3.6\n95216.78,Philsophy,3.1\n87552.18,biology,4.9\n94103.5,english ,4.6\n96373.2,physical education ,3.0\n101941.4,science ,3.3\n100997.92,management,3.2\n89535.8,physical education ,2.0\n100458.18,comp sci,3.9\n96518.31,history,3.8\n92351.4,economics ,3.9\n100616.97,social science ,3.4\n86405.92,physics,4.5\n79457.65,criminal justice,2.8\n96907.02,math ,4.5\n93908.54,Social Work ,3.6\n93986.1,biology,3.5\n98334.82,physical education ,3.0\n97305.02,science ,3.0\n93390.49,history,3.2\n93995.77,music ,4.0\n97555.5,history ,4.3\n97528.87,psychology ,3.7\n97489.2,physical education ,2.6\n89948.08,science ,4.4\n76710.6,criminal justice,2.9\n82798.2,english ,4.4\n96975.8,science ,4.0\n87644.54,languages,3.9\n96305.5,geography,4.3\n96470.98,physical education ,2.3\n70419.69,education,3.3\n88448.38,geography,4.4\n96277.31,sociology,2.8\n88322.2,english ,3.8\n94294.5,languages,4.3\n85463.9,chemistry ,4.2\n95086.82,physics,4.5\n93606.92,psychology ,4.3\n94340.32,political science ,2.4\n88236.7,psychology ,2.6\n86390.34,music ,3.8\n93761.0,fine arts ,3.3\n83513.18,education,2.0\n92552.22,accounting ,4.6\n87848.4,anthropology ,2.6\n91519.9,education,3.4\n91412.42,health science ,4.5\n88431.5,english ,2.8\n88369.5,chemistry ,3.9\n91154.4,history,2.9\n86330.68,psychology ,4.6\n87265.6,biology,4.0\n84685.62,communication,2.3\n78245.98,education,3.3\n89136.22,math ,3.4\n89678.1,physical education ,4.5\n88064.42,art history ,1.9\n81063.3,communication,5.0\n87610.7,geography,4.5\n88095.4,sociology,4.3\n88269.04,english ,3.9\n88265.82,Philsophy,3.3\n81327.6,Social Work ,3.7\n88175.0,english ,3.8\n86785.72,languages,4.2\n86943.42,science ,4.1\n85974.82,history ,3.9\n77828.68,math ,3.8\n80138.2,education,5.0\n86932.05,graphic art ,4.1\n78121.54,languages,3.8\n85919.03,english ,4.6\n83486.0,math ,2.9\n78567.87,music ,3.6\n85325.4,health science ,4.2\n85108.6,comp sci,3.0\n79563.65,biology,3.5\n78364.74,english ,4.1\n69493.85,sociology,2.6\n82746.35,english ,4.1\n69596.82,biology,3.2\n83772.34,political science ,3.1\n76876.59,english ,3.6\n82946.77,english ,4.0\n83091.68,education,3.3\n82960.72,geography,4.5\n79041.34,music ,3.1\n79563.64,psychology ,3.4\n82472.72,health science ,3.5\n75186.23,political science ,3.6\n81965.93,sociology,1.8\n81368.19,health science ,4.2\n77644.09,political science ,3.6\n81112.72,english ,4.8\n78823.78,english ,4.0\n76876.61,math ,4.2\n78735.8,languages,4.0\n77480.29,biology,4.9\n79292.7,english ,4.8\n75543.42,communication,4.1\n74372.2,communication,4.6\n78364.74,english ,3.7\n78169.62,Philsophy,3.7\n75539.23,biology,4.6\n71026.66,english ,3.6\n78178.17,history,4.2\n78178.16,communication,3.9\n78059.02,fine arts ,2.9\n77535.58,math ,4.8\n73514.42,political science ,4.7\n74520.94,communication,4.8\n69373.38,Philsophy,3.8\n77280.92,biology,3.3\n76782.22,communication,3.7\n76710.6,math ,3.2\n76917.32,psychology ,4.3\n71077.98,anthropology ,2.3\n76710.6,history,4.2\n76680.96,psychology ,3.6\n76600.1,Philsophy,4.7\n76456.16,accounting ,4.0\n74602.6,Philsophy,3.3\n75543.36,psychology ,4.5\n74955.93,english ,4.0\n74602.6,sociology,3.3\n73787.71,english ,3.7\n71119.1,physics,4.5\n69920.01,psychology ,4.7\n68802.62,english ,4.6\n68802.62,physical education ,5.0\n71253.05,comp sci,4.3\n71411.3,history,3.9\n68802.62,psychology ,3.0\n68802.62,math ,4.2\n27594.06,psychology ,4.5\n46904.8,fine arts ,3.0\n41575.57,fine arts ,2.7\n40069.77,Social Work ,4.3\n38166.75,english ,3.8\n36570.68,math ,2.8\n25525.66,science ,4.4\n3565.92,psychology ,3.9\n3565.91,education,2.9\n3565.91,english ,3.4\n4756.51,business,4.4\n4220.97,anthropology ,2.3\n3444.87,education,4.1\n3573.19,psychology ,3.6\n3610.59,english ,3.2\n3600.86,anthropology ,3.6\n3565.91,criminal justice,4.9\n3565.91,psychology ,4.0\n3565.91,political science ,4.7\n3536.55,education,2.9\n3520.66,languages,3.2\n3444.87,math ,3.9";
    </script>
    <script type="text/javascript">
        function parseCSV(text) {
          var lines = text.trim().split(/\r?\n/);
          if (lines.length < 2) return [];
          var headers = lines[0].split(',').map(function(h) { return h.trim(); });
          var rows = [];
          for (var i = 1; i < lines.length; i++) {
            var vals = lines[i].split(',');
            var row = {};
            for (var j = 0; j < headers.length; j++) {
              var h = headers[j];
              var v = vals[j] != null ? vals[j].trim() : '';
              if (h === 'Base Pay' || h === 'rating') row[h] = parseFloat(v) || 0;
              else row[h] = v;
            }
            rows.push(row);
          }
          return rows;
        }

        function buildSpecs(profData) {
          var dataRef = { values: profData };
          return {
            scatter: {
              $schema: 'https://vega.github.io/schema/vega-lite/v6.json',
              description: 'Scatter plot of salary vs student rating',
              data: dataRef,
              mark: { type: "line", point: true, color: "steelblue" },
              encoding: {
                x: { field: 'rating', type: 'quantitative', title: 'Prof Rating' },
                y: { field: 'Base Pay', type: 'quantitative', title: 'Prof Salary' },
                tooltip: [
                  { field: "Base Pay", type: "quantitative" },
                  { field: "rating", type: "quantitative" },
                  { field: "dept", type: "nominal" }
                ]
              }
            },
            salaryByDept: {
              $schema: 'https://vega.github.io/schema/vega-lite/v6.json',
              description: 'Salary distribution by department',
              data: dataRef,
              mark: { type: "boxplot", extent: "min-max" },
              encoding: {
                x: { field: 'dept', type: 'ordinal', title: 'Department' },
                color: { field: "dept", type: "ordinal" },
                y: { field: 'Base Pay', type: 'quantitative', title: 'Prof Salary' },
              }
            },
            avgRatingByDept: {
              $schema: 'https://vega.github.io/schema/vega-lite/v6.json',
              description: 'Average student rating by department',
              data: dataRef,
              mark: { type: "bar" },
              encoding: {
                x: { field: 'dept', type: 'ordinal', sort: "-y", title: 'Department' },
                y: { field: 'rating', type: 'quantitative', aggregate: 'mean', title: 'Average Prof Rating' },
              }
            },
            ratingDist: {
              $schema: 'https://vega.github.io/schema/vega-lite/v6.json',
              description: 'Distribution of student ratings',
              data: dataRef,
              mark: { type: "bar" },
              encoding: {
                x: { bin: "true", field: 'rating', title: 'Prof Rating' },
                y: { aggregate: "count" }
              }
            },
            salaryDist: {
              $schema: 'https://vega.github.io/schema/vega-lite/v6.json',
              description: 'Distribution of professor salaries',
              data: dataRef,
              mark: { type: "bar" },
              encoding: {
                x: { bin: "true", field: 'Base Pay', title: 'Prof Salary' },
                y: { aggregate: "count" }
              }
            }
          };
        }

        function showLoadError(msg) {
          var el = document.createElement('div');
          el.className = 'load-error full-width';
          el.innerHTML = '<strong>Data could not be loaded.</strong> ' + msg;
          document.querySelector('.dashboard').insertBefore(el, document.querySelector('.dashboard').firstChild);
        }

        function renderCharts(profData) {
          var specs = buildSpecs(profData);
          vegaEmbed('#scatter-salary-rating', specs.scatter);
          vegaEmbed('#salary-by-department', specs.salaryByDept);
          vegaEmbed('#avg-rating-by-department', specs.avgRatingByDept);
          vegaEmbed('#rating-distribution', specs.ratingDist);
          vegaEmbed('#salary-distribution', specs.salaryDist);
        }

        // Use embedded data so the dashboard works when opened directly (no server needed)
        var profData = parseCSV(embeddedCsv);
        if (profData.length) {
          renderCharts(profData);
        } else {
          showLoadError('Embedded data is missing or invalid.');
        }
    </script>

  </body>
</html>
